<?php
// Auth check
if(!isset($_SESSION['valid_recipe_user'])) {
    header("Location: index.php?content=login");
    exit();
}
?>

<div class="">
    <div class="page-banner">
        <h1>Add Recipe</h1>
        <nav>
            <a href="index.php">Home</a>
            <p>&ensp;/&ensp;</p>
            <p>Add Recipe</p>
        </nav>
    </div>

    <div class="recipe-form-block">
        <form class="recipe-form" action="addrecipe.inc.php" method="post" enctype="multipart/form-data">
            <div class="recipe-field">
                <label class="label-typical" for="title">Recipe Name</label>
                <input class="input-field" required type="text" name="title">
            </div>
        
            <div class="recipe-field">
                <label class="label-typical" for="shortdesc">Short Description</label>
                <textarea class="input-field" required name="shortdesc" id="" cols="50" rows="5"></textarea>
            </div>
        
            <div id="ingredients-container">
                <label class="label-typical" for="">Ingredients</label>
                <div class="ingredients-container-wrapper">
                    <input class="input-field" required type="text" name="ingredients[]">
                    <button type="button" onclick="addIngredient()">Add Ingredient</button>
                </div>
            </div>
        
            <div id="directions-container">
                <label class="label-typical" for="">Directions</label>
                <div class="directions-container-wrapper">
                    <textarea class="input-field" required name="directions[]"></textarea>
                    <button type="button" onclick="addDirection()">Add Step</button>
                </div>
            </div>

            <div id="filestack-picker">
                <label class="label-typical" for="">Featured Photo</label>
                <div class="picker-wrapper">
                    <label for="upload-button" class="custom-upload-button">
                        Upload Photo
                    </label>
                    <div class="insert-photo-container">
                        <input type="file" id="upload-button" class="file-input" onchange="displayFileName()">
                        <input type="hidden" name="image_url" id="image-url">
                    </div>
                    <div class="file-name" id="file-name"></div>
                </div>
            </div>
        
            <input class="submit-btn" type="submit" value="Submit">
            <input type="hidden" name="content" value="newrecipe">
        </form>
    </div>
</div>